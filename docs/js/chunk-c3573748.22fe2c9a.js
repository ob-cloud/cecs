(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3573748"],{"26b7":function(e,t,n){"use strict";var a=n("dccf"),i=n.n(a);i.a},"26d6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"device smart"},[n("base-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{height:e.tableHeight,tableData:e.tableData,columns:e.columns,stripe:"",border:"",pageTotal:e.total,pageSize:e.search.pageSize},on:{"on-current-page-change":e.onCurrentChange,"on-page-size-change":e.onSizeChange}},[e._t("default",[n("template",{slot:"caption"},[n("el-input",{staticClass:"caption-item",attrs:{placeholder:"设备序列号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.search.obox_serial_id,callback:function(t){e.$set(e.search,"obox_serial_id",t)},expression:"search.obox_serial_id"}}),n("el-select",{staticClass:"caption-item",attrs:{clearable:"",placeholder:"所有设备"},model:{value:e.search.obxId,callback:function(t){e.$set(e.search,"obxId",t)},expression:"search.obxId"}},[n("el-option",{attrs:{label:"所有设备",value:""}})],1),n("el-input",{staticClass:"caption-item",attrs:{placeholder:"设备类型"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.search.device_type,callback:function(t){e.$set(e.search,"device_type",t)},expression:"search.device_type"}}),n("el-input",{staticClass:"caption-item",attrs:{placeholder:"设备名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查询")])],1),n("template",{slot:"actionBar"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("添加设备")])],1)])],2)],1)},i=[],c=(n("386d"),n("29d7")),o=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),r=n("cb4b");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){Object(o["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={getDeviceList:function(e){var t=e.pageNo,n=e.pageSize;return delete e.pageNo,delete e.pageSize,r["a"].get("/consumer/common",s({CMD:"query_device",start_index:t,count:n},e))}},p=u,d=n("9a36"),h=n("0feb"),g={data:function(){return{tableLoading:!0,tableHeight:0,search:{obox_serial_id:"",name:"",device_type:"",obxId:"",pageNo:d["a"],pageSize:d["b"]},tableData:[],columns:[]}},components:{BaseTable:c["a"]},created:function(){this.columns=this.getColumns(),this.getDeviceList()},computed:{total:function(){return this.tableData.length||0}},mounted:function(){h["a"].windowOnResize(this,this.fixLayout)},methods:{fixLayout:function(){this.tableHeight=h["a"].calculateTableHeight()},getColumns:function(){return[{label:"设备序号",prop:"obox_serial_id",align:"center"},{label:"设备名称",prop:"name",align:"center"},{label:"设备地址",prop:"addr",align:"center"},{label:"设备状态",prop:"state",align:"center"},{label:"设备类型",prop:"device_type",align:"center"},{label:"子设备类型",prop:"device_child_type",align:"center"},{label:"设备版本",prop:"version",align:"center"},{label:"操作",align:"center",minWidth:"180px",renderBody:this.getToolboxRender}]},getToolboxRender:function(e,t){var n=this;return[e("el-button",{attrs:{size:"tiny",icon:"el-icon-edit"},on:{click:function(){return n.editDevice(t)}}}),e("el-button",{attrs:{size:"tiny",icon:"el-icon-setting"},on:{click:function(){return n.settingDevice(t)}}}),e("el-button",{attrs:{size:"tiny",icon:"el-icon-info"},on:{click:function(){return n.checkDeviceInfo(t)}}}),e("el-button",{attrs:{size:"tiny",icon:"el-icon-delete"},on:{click:function(){return n.removeDevice(t)}}})]},getDeviceList:function(){var e=this;this.tableLoading=!0,p.getDeviceList(this.search).then(function(t){200===t.status?e.tableData=t.data.config:e.$message({message:t.message||"设备获取失败"}),e.tableLoading=!1}).catch(function(t){e.$message({title:"失败",message:t.message||"服务出错",type:"error"}),e.tableLoading=!1})},onCurrentChange:function(e){this.search.pageNo=e,this.getDeviceList()},onSizeChange:function(e){this.search.pageSize=e,this.getDeviceList()},handleSearch:function(){this.search.pageNo=d["a"],this.getDeviceList()},handleCreate:function(){},editDevice:function(e){console.log("edit ",e)},settingDevice:function(e){console.log("set ",e)},checkDeviceInfo:function(e){console.log("check ",e)},removeDevice:function(e){console.log("remove ",e)}}},b=g,f=(n("26b7"),n("2877")),v=Object(f["a"])(b,a,i,!1,null,"c912069c",null);t["default"]=v.exports},dccf:function(e,t,n){}}]);
//# sourceMappingURL=chunk-c3573748.22fe2c9a.js.map