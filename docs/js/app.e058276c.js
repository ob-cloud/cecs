(function(e){function n(n){for(var r,o,c=n[0],i=n[1],s=n[2],d=0,f=[];d<c.length;d++)o=c[d],a[o]&&f.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(n);while(f.length)f.shift()();return u.push.apply(u,s||[]),t()}function t(){for(var e,n=0;n<u.length;n++){for(var t=u[n],r=!0,o=1;o<t.length;o++){var c=t[o];0!==a[c]&&(r=!1)}r&&(u.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},o={app:0},a={app:0},u=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0ea19040":"c5161d29","chunk-1e326e68":"8a68c29b","chunk-75f64913":"d55b358a","chunk-7c63bb51":"0d3b684c","chunk-c3573748":"22fe2c9a","chunk-2d0e5357":"23d41094","chunk-3bb5d8bc":"bf6da7cc","chunk-6460f7a0":"848da95e","chunk-6f478302":"c63fdbdb","chunk-74fb70e7":"1522b66d"}[e]+".js"}function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t={"chunk-1e326e68":1,"chunk-75f64913":1,"chunk-7c63bb51":1,"chunk-c3573748":1,"chunk-3bb5d8bc":1,"chunk-6f478302":1,"chunk-74fb70e7":1};o[e]?n.push(o[e]):0!==o[e]&&t[e]&&n.push(o[e]=new Promise(function(n,t){for(var r="css/"+({}[e]||e)+"."+{"chunk-0ea19040":"31d6cfe0","chunk-1e326e68":"29f6224d","chunk-75f64913":"e78d5e4c","chunk-7c63bb51":"7973e86a","chunk-c3573748":"c50afdac","chunk-2d0e5357":"31d6cfe0","chunk-3bb5d8bc":"bd2141d2","chunk-6460f7a0":"31d6cfe0","chunk-6f478302":"4269dd9e","chunk-74fb70e7":"4607a112"}[e]+".css",a=i.p+r,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===a))return n()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){s=f[c],d=s.getAttribute("data-href");if(d===r||d===a)return n()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=n,l.onerror=function(n){var r=n&&n.target&&n.target.src||a,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete o[e],l.parentNode.removeChild(l),t(u)},l.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(l)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)n.push(r[2]);else{var u=new Promise(function(n,t){r=a[e]=[n,t]});n.push(r[2]=u);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(e),s=function(n){d.onerror=d.onload=null,clearTimeout(f);var t=a[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src,u=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");u.type=r,u.request=o,t[1](u)}a[e]=void 0}};var f=setTimeout(function(){s({type:"timeout",target:d})},12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(n)},i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=n,s=s.slice();for(var f=0;f<s.length;f++)n(s[f]);var l=d;u.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"0ea8":function(e,n,t){},"164a":function(e,n,t){"use strict";t.d(n,"a",function(){return c});var r=t("d225"),o=t("b0b4"),a=t("9a36"),u=function(){function e(n){Object(r["a"])(this,e),this.strategy=n||"localStorage"}return Object(o["a"])(e,[{key:"setStrategy",value:function(e){return this.strategy=e,this}},{key:"set",value:function(e,n){return window[this.strategy].setItem(e,n),this}},{key:"get",value:function(e){return window[this.strategy].getItem(e)}},{key:"remove",value:function(e){return window[this.strategy].removeItem(e),this}},{key:"clear",value:function(){return window[this.strategy].clear(),this}}]),e}(),c=new u,i={setToken:function(e){c.setStrategy("localStorage").set(a["c"],e)},getToken:function(){return c.setStrategy("localStorage").get(a["c"])},removeToken:function(){c.setStrategy("localStorage").remove(a["c"])}};n["b"]=i},"313f":function(e,n,t){},4360:function(e,n,t){"use strict";var r,o,a=t("2b0e"),u=t("2f62"),c=t("bd86"),i="UPDATE_DOCUMENT_CLIENT_HEIGHT",s="SET_MENU_NAV_LIST",d="SET_SYS_MENU_LIST",f="UPDATE_MENU_NAV_ACTIVE_NAME",l="SET_SIDEBAR_MENU_LIST",h="UPDATE_SIDEBAR_MENU_ACTIVE_NAME",m="SET_TOKEN",p="SET_UID",b="SET_INTRODUCTION",g="SET_NAME",v="SET_AVATAR",k="SET_USER_INFO",T="SET_PWD",E=t("8593"),_=t("164a"),S=t("6821f"),y=t.n(S),w={state:{user:"",token:_["b"].getToken(),name:_["a"].setStrategy("sessionStorage").get("name"),avatar:"",introduction:"",userInfo:null,pwd:_["a"].setStrategy("sessionStorage").get("pk")},mutations:(r={},Object(c["a"])(r,m,function(e,n){e.token=n}),Object(c["a"])(r,p,function(e,n){e.uid=n}),Object(c["a"])(r,b,function(e,n){e.introduction=n}),Object(c["a"])(r,g,function(e,n){e.name=n}),Object(c["a"])(r,v,function(e,n){e.avatar=n}),Object(c["a"])(r,k,function(e,n){e.userInfo=n}),Object(c["a"])(r,T,function(e,n){e.pwd=n}),r),actions:{loginByAccount:function(e,n){var t=e.commit;return new Promise(function(e,r){var o=y()(btoa(n.password)+n.password);E["a"].login(n.account.trim(),o).then(function(r){if(r){var a=r.access_token;_["b"].setToken(a),_["a"].setStrategy("sessionStorage").set("pk",o),_["a"].setStrategy("sessionStorage").set("name",n.account.trim()),t("SET_TOKEN",a),t("SET_NAME",n.account.trim()),t("SET_USER_INFO",r),t("SET_PWD",o)}e(r)}).catch(function(e){r(e)})})},getUserInfo:function(e){e.commit,e.state;return new Promise(function(e,n){})},logOut:function(e){var n=e.commit;e.state;return new Promise(function(e,t){n("SET_TOKEN",""),n("SET_USER_INFO",null),n("SET_NAME",""),n("SET_PWD",""),_["b"].removeToken(),_["a"].setStrategy("sessionStorage").remove("pk"),_["a"].setStrategy("sessionStorage").remove("name"),e()})},renewToken:function(e,n){var t=e.commit;return new Promise(function(e){E["a"].reNewAcessToken(n).then(function(n){var r=n.data,o=r,a=o.data;if(0===o.code){var u=a.accessToken;_["b"].setToken(u),t("SET_TOKEN",u)}e()})})}}},N=w,O=[{name:"设备管理",path:"/device/index.html"},{name:"场景管理",path:"/scene/index.html"},{name:"房间管理",path:"/room/index.html"},{name:"OBOX管理",path:"/obox/index.html"}],A={state:{menuNavActiveName:"",navbarMenus:[],sysMenuList:[],sidebarMenuActiveName:"",sidebarMenuList:[]},mutations:(o={},Object(c["a"])(o,s,function(e,n){e.navbarMenus=n}),Object(c["a"])(o,d,function(e,n){e.sysMenuList=n}),Object(c["a"])(o,f,function(e,n){e.menuNavActiveName=n}),Object(c["a"])(o,l,function(e,n){e.sidebarMenuList=n}),Object(c["a"])(o,h,function(e,n){e.sidebarMenuActiveName=n}),o),actions:{generateNavibarMenu:function(e){var n=e.commit;return new Promise(function(e){n("SET_MENU_NAV_LIST",O),C.dispatch("getUserInfo").then(function(n){e(n)})})},updateMenuNavActiveName:function(e,n){var t=e.commit;t("UPDATE_MENU_NAV_ACTIVE_NAME",n)}}},M=A,j=(t("7f7f"),{token:function(e){return e.user.token},uid:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},pwd:function(e){return e.user.pwd},introduction:function(e){return e.user.introduction},userInfo:function(e){return e.user.userInfo},navbarMenus:function(e){return e.menu.navbarMenus},sysMenuList:function(e){return e.menu.sysMenuList},sidebarMenuList:function(e){return e.menu.sidebarMenuList},documentClientHeight:function(e){return e.documentClientHeight}}),P={updateDocumentClientHeight:function(e,n){var t=e.commit;t("UPDATE_DOCUMENT_CLIENT_HEIGHT",n)}},I=Object(c["a"])({},i,function(e,n){e.documentClientHeight=n});a["default"].use(u["a"]);var U={documentClientHeight:0},x=new u["a"].Store({modules:{user:N,menu:M},state:U,getters:j,mutations:I,actions:P}),C=n["a"]=x},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var r=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},a=[],u={name:"app"},c=u,i=t("2877"),s=Object(i["a"])(c,o,a,!1,null,null,null),d=s.exports,f=t("a18c"),l=t("4360"),h=t("5c96"),m=t.n(h);t("6861"),t("0ea8"),t("313f");r["default"].use(m.a),r["default"].config.productionTip=!1,new r["default"]({router:f["a"],store:l["a"],render:function(e){return e(d)}}).$mount("#app")},6861:function(e,n,t){},8593:function(e,n,t){"use strict";var r=t("cb4b"),o=t("4328"),a=t.n(o),u={login:function(e,n){return r["a"].post("/oauth/token",a.a.stringify({password:n,username:e,grant_type:"password"}),{Authorization:"Basic d2ViQXBwOndlYkFwcA==","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8","cache-control":"no-cache"})},logout:function(e){return r["a"].post({url:"logout",params:{accessToken:e}})},reNewAcessToken:function(e){return r["a"].post({url:"renewToken",params:{accessToken:e}})},resetPassword:function(e){return r["a"].get("/consumer/common",{CMD:"set_pwd",type:"00",pwd:e})},getQiniuToken:function(){return r["a"].post({url:"getQiniuToken"})},getReqUrlByQiniuKey:function(e){return r["a"].post({url:"qiniu/url",params:{key:e}})}};n["a"]=u},"9a36":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a});var r="mip.web.sys:user:token",o=1,a=10},a18c:function(e,n,t){"use strict";t("6762"),t("2fdb");var r=t("2b0e"),o=t("8c4f"),a=t("323e"),u=t.n(a),c=(t("a5d8"),t("164a")),i=t("75fc"),s=[{name:"/401",path:"/401",desc:"401",component:function(){return t.e("chunk-3bb5d8bc").then(t.bind(null,"13fd"))}},{name:"/404",path:"/404",desc:"404页面",component:function(){return t.e("chunk-74fb70e7").then(t.bind(null,"9761"))}}],d=s,f=[{name:"/device/index.html",path:"/device/index.html",desc:"设备管理",component:function(){return Promise.all([t.e("chunk-0ea19040"),t.e("chunk-c3573748")]).then(t.bind(null,"26d6"))}},{name:"/scene/index.html",path:"/scene/index.html",desc:"场景管理",component:function(){return Promise.all([t.e("chunk-0ea19040"),t.e("chunk-7c63bb51")]).then(t.bind(null,"d4fe"))}},{name:"/room/index.html",path:"/room/index.html",desc:"房间管理",component:function(){return Promise.all([t.e("chunk-0ea19040"),t.e("chunk-1e326e68")]).then(t.bind(null,"ce76"))}},{name:"/obox/index.html",path:"/obox/index.html",desc:"OBOX管理",component:function(){return Promise.all([t.e("chunk-0ea19040"),t.e("chunk-75f64913")]).then(t.bind(null,"5473"))}}],l={name:"home",path:"/",desc:"首页",component:function(){return t.e("chunk-6460f7a0").then(t.bind(null,"d9ce"))},redirect:{path:"/dashboard"},children:[{name:"dashboard",path:"/dashboard",redirect:{path:"/device/index.html"},component:function(){return t.e("chunk-2d0e5357").then(t.bind(null,"9406"))}}].concat(Object(i["a"])(f),Object(i["a"])(d))},h=[{name:"login",path:"/login",desc:"登录页",component:function(){return t.e("chunk-6f478302").then(t.bind(null,"9ed6"))}},l,{path:"*",redirect:"/404"}],m=t("4360");r["default"].use(o["a"]);var p=new o["a"]({mode:"hash",scrollBehavior:function(){return{y:0}},routes:h});p.beforeEach(function(e,n,t){u.a.start(),c["b"].getToken()?(m["a"].dispatch("generateNavibarMenu"),"/login"===e.path?t({path:"/"}):t()):(e.path.includes("/login")?t():t({path:"/login"}),u.a.done())}),p.afterEach(function(){u.a.done()});n["a"]=p},cb4b:function(e,n,t){"use strict";t("6762"),t("2fdb"),t("6b54");var r=t("7618"),o=t("bc3a"),a=t.n(o),u=t("164a"),c=t("a18c"),i={dev:{baseApi:"http://localhost:8081/"},prod:{baseApi:""}},s=i;t.d(n,"a",function(){return m});var d=!0,f=d?s.prod.baseApi:s.dev.baseApi,l=a.a.create({baseURL:f,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"},timeout:16e3});l.interceptors.request.use(function(e){return"object"===Object(r["a"])(e.params)&&u["b"].getToken()&&(e.params.access_token=u["b"].getToken()),e},function(e){Promise.reject(e)}),l.interceptors.response.use(function(e){var n=e.data;return 1002===n.code&&(u["b"].removeToken(),c["a"].push({path:"/login"})),n},function(e){var n=e.toString()||"";n.includes("401")&&(u["b"].removeToken(),c["a"].push({path:"/login"})),Promise.reject(e)});var h=function(e,n,t,r){var o={method:e,url:n,params:["GET","DELETE"].includes(e.toUpperCase())?t:{},data:["POST","PUT"].includes(e.toUpperCase())?t:{}};return r&&(o.headers=r),o},m={getRequestUrl:function(e){return f+e},get:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return l(h("GET",e,n,t))},post:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return l(h("post",e,n,t))}}}});
//# sourceMappingURL=app.e058276c.js.map